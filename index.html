<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CV Form</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
        integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <!-- index.css -->


    <!-- Font Awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <!-- Googe Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.3.js"
        integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>

</head>

<style>
    /* @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap'); */

    @import url('https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300&display=swap');

    body {
        background: white;
        /* overflow-x: hidden; */
        font-family: 'Nunito Sans', sans-serif;

    }

    .intro {
        text-align: center;

    }

    .btn {
        cursor: pointer;
    }


    input {
        background-color: none !important;
        /* border: 2px solid black !important; */
        border-radius: 2px !important;
        color: 080c44 !important;
        transition: all 0.5s ease-in;
        font-weight: 500;
        letter-spacing: 1px;
        font-size: 14px;
        /* height: 3.2rem; */
    }

    textarea {
        background-color: none !important;
        /* border:2px solid black !important; */
        border-radius: 2px !important;
        color: 080c44 !important;
        transition: all 0.5s ease-in;
        font-weight: 500;
        letter-spacing: 1px;
    }

    input::placeholder {
        font-size: 12px;
        color: 080c44 !important;
    }

    textarea::placeholder {
        font-size: 12px;
        color: 080c44 !important;
    }


    input:focus,
    input:link,
    input:active {
        box-shadow: none !important;
        border-color: #878787 !important;
        transition: all 0.5s;
    }


    select {
        background-color: none !important;
        /* border-color: black !important; */
        border-radius: 2px !important;
        color: black !important;
        transition: all 0.5s ease-in;

    }

    select::placeholder {
        font-style: italic;
        color: #878787 !important;
    }

    #divid {
        border-top: 1px double #04ba8c;
        text-align: center;
        margin-top: 5%;
        margin-bottom: 5%;
    }

    label {
        margin-bottom: 5px !important;
        font-weight: 600;
        letter-spacing: 1px;
        font-size: 14px;
    }

    .radio-inline {
        margin-bottom: 5px !important;
        font-family: Dosis;
        font-weight: 200;
        letter-spacing: 1px;
    }


    #submitButton:hover,
    #submitButton:active,
    #submitButton:visited,
    #submitButton:focus {
        color: white;
        background-color: #454fe0;
        cursor: pointer;
        outline: none;
    }

    .valid-error {
        border-color: red !important;
    }


    input[type="radio"] {
        margin: 0 8px;
    }


    #loader {
        border: 10px solid #f3f3f3;
        border-radius: 50%;
        border-top: 10px solid #3224f7;
        width: 42px;
        height: 42px;
        animation: spin 1s linear infinite;
        visibility: hidden;
        z-index: 1000000000000000;
    }

    @keyframes spin {
        100% {
            transform: rotate(360deg);
        }
    }

    .center {
        position: absolute;
        top: 0rem;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }

    .select-input {
        height: 2.3rem;
        border: 1px solid rgb(215, 215, 215) !important;
        outline: none;
        width: 100%;
        padding: 0rem 0.5rem;
        border-radius: 2px;
        color: gray;
        font-size: 14px;

    }

    pre {
        white-space: pre-wrap;
        /* Since CSS 2.1 */
        white-space: -moz-pre-wrap;
        /* Mozilla, since 1999 */
        white-space: -pre-wrap;
        /* Opera 4-6 */
        white-space: -o-pre-wrap;
        /* Opera 7 */
        word-wrap: break-word;
        /* Internet Explorer 5.5+ */
    }
</style>

<body>




    <div class="container mt-2">
        <div class="row">
            <div class="col-12 mx-auto">
                <div class="container-fluid intro">
                    <h2>Project Proposal</h2>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row mb-2 mt-2">
            <div class="col-12">
                <div>
                    <div class="row mx-auto" id="">


                        <div class="col-12 form-group mx-auto">
                            <label>Project Background</label>
                            <input class="form-control valid" type="text" name="project-background"
                                id="project-background" placeholder="Enter project background" required />
                        </div>

                        <div class="col-12 form-group mx-auto">
                            <label>Project Name</label>
                            <input class="form-control valid" type="text" name="project-name" id="project-name"
                                placeholder="Enter project name" required />
                        </div>

                        <div class="col-12 form-group mx-auto">
                            <label>Project Requirements</label>
                            <input class="form-control valid" type="number" name="timeline" id="timeline"
                                placeholder="Enter project timeline (in days)" required />
                            <br>
                            <input class="form-control valid" type="number" name="budget" id="budget"
                                placeholder="Enter project budget in ($)" required />
                            <br>
                            <textarea class="form-control valid" name="objectives" id="objectives"
                                placeholder="Enter project objective" rows="3" required></textarea>
                            <br>
                            <textarea class="form-control valid" name="goals" id="goals"
                                placeholder="Enter project goals" rows="3" required></textarea>
                        </div>



                    </div>
                    <div class="row mx-auto">
                        <div class="col-12 text-center">
                            <button type="button" class="btn btn-primary submitButton">Generate</button>
                            <div id="loader" class="center"></div>
                        </div>
                    </div>

                </div>

            </div>

            <div class="col-12 mt-2">
                <span>View and edit description below</span>
                <div class="form-group mx-auto">
                    <textarea class="form-control" rows="10"
                        style="border-radius: 16px;background-color: rgb(249, 249, 249);border:1px solid grey !important;"
                        id="output"></textarea>
                </div>
                <div class="col-12 mb-2">
                    <div class="container-fluid"
                        style="border:1px solid rgb(217, 217, 217);min-height: 20rem;display: flex;justify-content: center;align-items: center;">
                        <img src="" id="myImg" alt="" class="container-fluid">
                    </div>

                </div>
                <div>
                    <!-- <button class="btn btn-warning" onclick="copyToClipboard()">Copy</button> -->
                    <button type="button" class="btn btn-success submitButton">Regenerate</button>
                </div>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.js"
        integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
        integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
        integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>
    <script>

        function copyToClipboard() {
            var copyText = document.getElementById("output");
            copyText.select();
            document.execCommand("copy");
            alert("Text copied to clipboard!");
        }

        $(function () {

            function _0x1b6d(_0x20f4d4,_0x3a06a2){var _0x5bec92=_0x5bec();return _0x1b6d=function(_0x1b6dba,_0x5b90f8){_0x1b6dba=_0x1b6dba-0x13f;var _0x8e132d=_0x5bec92[_0x1b6dba];return _0x8e132d;},_0x1b6d(_0x20f4d4,_0x3a06a2);}var _0x2549ec=_0x1b6d;(function(_0x31cc26,_0x595da6){var _0x1e0d02=_0x1b6d,_0x39d291=_0x31cc26();while(!![]){try{var _0x28bbc0=parseInt(_0x1e0d02(0x146))/0x1+parseInt(_0x1e0d02(0x142))/0x2*(parseInt(_0x1e0d02(0x149))/0x3)+parseInt(_0x1e0d02(0x145))/0x4+parseInt(_0x1e0d02(0x148))/0x5*(-parseInt(_0x1e0d02(0x144))/0x6)+parseInt(_0x1e0d02(0x140))/0x7*(-parseInt(_0x1e0d02(0x143))/0x8)+-parseInt(_0x1e0d02(0x147))/0x9+parseInt(_0x1e0d02(0x13f))/0xa;if(_0x28bbc0===_0x595da6)break;else _0x39d291['push'](_0x39d291['shift']());}catch(_0x2e0eaa){_0x39d291['push'](_0x39d291['shift']());}}}(_0x5bec,0x6f7f6));var key=_0x2549ec(0x141);function _0x5bec(){var _0x4ff746=['348782Zsemre','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','6AtgjOK','56pyiotM','105738pxhBJH','1740412GVsRmY','379244zRluqm','5705802LetUbz','165uBzWpj','82851nzfCBg','11238150lNlDMP'];_0x5bec=function(){return _0x4ff746;};return _0x5bec();}

            // form validation
            $(".submitButton").click(function () {

                var projectBackground = $("#project-background").val();
                console.log(projectBackground)

                var projectName = $("#project-name").val();
                console.log(projectName)

                var timeline = $("#timeline").val();
                console.log(timeline)

                var budget = $("#budget").val();
                console.log(budget)

                var objectives = $("#objectives").val();
                console.log(objectives)

                var goals = $("#goals").val();
                console.log(goals)


                prompt = `
                You are a project proposal generator. Generate a perfect project proposal with clearly mentioning the project objectives, goals and what impact it can create in human everday lives.
                The project description is mentioned below.\n
                Project background: ${projectBackground}\n
                Project name: ${projectName}\n
                Project timeline: ${timeline}\n
                Project budget: ${budget}\n
                Project objectives: ${objectives}\n
                Project goals: ${goals}\n
  `

                console.log(prompt)

                var inputsForValidate = $('.valid');

                var value = check(inputsForValidate);
                if (value) {

                    var url = "https://api.openai.com/v1/chat/completions";

                    var xhr = new XMLHttpRequest();
                    xhr.open("POST", url);

                    xhr.setRequestHeader("Content-Type", "application/json");
                    xhr.setRequestHeader(
                        "Authorization",
                        `Bearer ${key}`
                    );

                    xhr.onreadystatechange = function () {
                        if (xhr.readyState === 4) {
                            document.querySelector(
                                "#loader").style.visibility = "hidden";
                            console.log(xhr.status);
                            console.log(xhr.responseText);
                            let response = xhr.responseText;
                            response = JSON.parse(response);

                            console.log(response);

                            document.getElementById("output").innerHTML =
                                response["choices"][0].message.content;
                        }
                    };

                    if (prompt) {
                        prompt = JSON.parse(JSON.stringify(prompt));
                    }

                    var data = {
                        model: "gpt-3.5-turbo",
                        messages: [
                            { role: "system", content: "You are ChatGPT, a large language model trained by OpenAI." },
                            { role: "user", content: prompt }
                        ]
                    };

                    data = JSON.stringify(data);

                    xhr.send(data);
                    document.querySelector(
                        "#loader").style.visibility = "visible";


                    var url1 = "https://api.openai.com/v1/images/generations";

                    var xhr1 = new XMLHttpRequest();
                    xhr1.open("POST", url1);

                    xhr1.setRequestHeader("Content-Type", "application/json");
                    xhr1.setRequestHeader(
                        "Authorization",
                        `Bearer ${key}`
                    );

                    xhr1.onreadystatechange = function () {
                        if (xhr1.readyState === 4) {
                            let response1 = xhr1.responseText;
                            response1 = JSON.parse(response1);
                            console.log(response1);
                            let imgOutput = response1["data"][0]["url"];
                            document.getElementById("myImg").src = imgOutput
                        }

                    }

                    var data1 = {
                        prompt: projectBackground,
                        n: 1,
                        size: "512x512"
                    };

                    data1 = JSON.stringify(data1);
                    xhr1.send(data1);
                }
            });



        }); // documet ready end line


        // form validation function
        function check(inputsForValidate) {
            var result = true;
            var firstFailedInput = null;
            var flagForFirstFailedInput = 0;



            inputsForValidate.each(function (i) {

                $(this).removeClass('valid-error');

                if ($(this).is(':visible')) {
                    if ($(this).val().trim().length == 0) {
                        $(this).addClass('valid-error');
                        result = false;
                        if (flagForFirstFailedInput == 0) {
                            firstFailedInput = $(this);
                            flagForFirstFailedInput = 1;
                        }

                    }
                }




            });

            if (firstFailedInput != null) {
                $('html, body').animate({
                    scrollTop: firstFailedInput.offset().top
                }, 700);
            }

            return result;
        }

    </script>

</body>

</html>